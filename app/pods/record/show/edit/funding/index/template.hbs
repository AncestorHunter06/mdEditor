<h4 class="section-header">
  Editing Funding
  {{control/md-status model=parentModel}}
</h4>
{{#unless model.json.metadata.funding}}
  <h3 class="alert alert-info">No Funding Periods found.
    <button type="button" class="btn btn-success" {{action "addAllocation"}}>
      {{fa-icon "plus"}} Add Funding Period</button>
  </h3>
{{/unless}}

{{!-- {{#each model.json.metadata.funding as |allocation index|}}
  {{#layout/md-card
    title=(concat "Funding Period #" index)
    collapsible=true
    collapsed=false
    profilePath="funding.allocation"
    data-spy=(concat "Funding Period " index)
    shadow=true
    spotlightEnabled=false
    flex=false
  }}
      <div class="row card-buttons">
        <div class="col-sm-6">
          <button type="button" class="btn btn-md btn-success btn-block md-btn-responsive" {{action "editAllocation" index}}>
            {{fa-icon "pencil"}} Edit Funding Period</button>
          </div>
          <div class="col-sm-6">
          {{#control/md-button-confirm class="btn btn-md btn-danger btn-block md-btn-responsive"
            onConfirm=(route-action "deleteAllocation" index)}}
            {{fa-icon "times"}} Delete Funding Period
          {{/control/md-button-confirm}}
        </div>
      </div>
      {{object/md-funding/preview item=allocation}}

  {{/layout/md-card}}

{{/each}} --}}

{{#each model.json.metadata.funding as |allocation index|}}
  {{#layout/md-object-container
    title="Funding Period"
    index=index
    editItem=(route-action "editAllocation")
    deleteItem=(route-action "deleteAllocation")
  }}
    {{object/md-funding/preview item=allocation}}
  {{/layout/md-object-container}}
{{/each}}

{{to-elsewhere
  named="md-subbar-extra"
  send=(component "control/subbar-link"
  clickText="Add Funding Period"
  clickIcon="plus"
  clickType="success"
  click=(route-action "addAllocation")
  )
}}

{{to-elsewhere named="md-scroll-spy-record-edit"
  send=(component "control/md-scroll-spy"  refresh=refresh scrollInit=scrollTo setScrollTo=(route-action "setScrollTo"))}}
