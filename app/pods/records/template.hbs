<h3>Metadata Record Dashboard</h3>
<hr>
<div class="container-fluid">
  <table class="table table-striped table-hover md-table-align-middle">
    <thead>
      <tr>
        <th></th>
        <th>#</th>
        <th>Record Name</th>
        <th>Resource Type</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {{#each model as |item index|}}
        <tr>
          <td>{{input type="checkbox" name="isChecked"}}</td>
          <td>{{index}}</td>
          <td>{{item.json.metadata.resourceInfo.citation.title}}</td>
          <td>{{join ', ' (map-by "type" item.json.metadata.resourceInfo.resourceType)}}</td>
          <td>
            <div class="pull-right md-dashboard-buttons">
              {{!-- {{debugger}} --}}
              {{control/md-status model=item isBtn=true}}
              {{#link-to "record.show" item.id class="btn btn-sm btn-info"}}
                {{fa-icon "eye"}} Show
              {{/link-to}}
              <button type="button" class="btn btn-sm btn-success" {{action "editItem" item}}>
                {{fa-icon "pencil"}} Edit
              </button>
              {{!-- {{#control/md-button-confirm class="btn btn-sm btn-danger" onConfirm=(route-action "deleteItem" item)}}
                <span class="fa fa-times"></span> Delete
              {{/control/md-button-confirm}} --}}
              {{#control/md-button-modal class="btn btn-sm btn-danger" message="<h1>Do
            you really want to delete this record?</h1>Be sure this record is
            not referenced by a metadata record or dictionary or it's deletion
            may cause those records to fail validation." onConfirm=(route-action "deleteItem" item)}}
                <span class="fa fa-times"></span> Delete
              {{/control/md-button-modal}}
              {{control/md-json-button class="btn-sm btn-primary" json=item.cleanJson}}
            </div>
          </td>
        </tr>
      {{else}}
        <tr>
          <td colspan=5>
            {{#link-to "record.new" class="btn btn-primary btn-lg" }}
              {{fa-icon "plus"}} Create a Record{{/link-to}}
          </td>
        </tr>
      {{/each}}
    </tbody>
  </table>
</div>

{{outlet}}
